
ARKit을 처음 다룰 때 반드시 짚고 넘어가야 할 개념이 있다. 바로 **월드 좌표계(world coordinate space)**다. AR 오브젝트를 배치하고, 환경을 이해하고, 사용자 위치를 파악하려면 우선 이 좌표계가 어떤 기준으로 정해지는지를 정확히 이해해야 한다.

## **1. 월드 좌표계의 정의**
ARKit에서 말하는 월드 좌표계는, **ARSession이 시작될 때 생성되는 3차원 공간상의 기준점(0,0,0)** 을 말한다. 이 기준은 다음을 기반으로 한다

- 사용자가 **디바이스를 처음 들고 카메라를 실행한 시점**의 위치와 방향
- ARKit이 주변 환경에서 **특징점(feature point)** 을 인식한 시점
- 사용자의 카메라 위치가 기준 원점(origin)이 된다

즉, 처음 디바이스가 위치했던 물리적 공간이 월드의 중심점으로 정해지고, 이후에는 해당 기준을 바탕으로 주변의 앵커나 오브젝트를 배치하게 된다.


## **2. 월드 좌표계의 방향 축**
기본적으로 ARKit의 좌표계는 **우측 좌표계(Right-handed Coordinate System)** 를 따른다. 각 축의 방향은 다음과 같다

- **X축**: 오른쪽(+), 왼쪽(–)
- **Y축**: 위쪽(+), 아래쪽(–)
- **Z축**: 사용자로부터 멀어질수록(–), 가까워질수록(+)

예를 들어 (0, 0, -1)은 사용자의 눈(카메라) 기준으로 1미터 앞을 의미한다


## **3. 초기화 시 기준점 설정 방식**
ARKit은 월드 좌표계를 수동으로 설정하지 않는다. 대신 내부적으로 다음과 같은 과정을 거친다

- 카메라 피드가 시작되면 **ARSessionConfiguration**을 기반으로 주변 환경을 스캔한다.
- 주변의 특징점들을 수집하여 **초기 평면 탐지** 또는 **시각적 트래킹 정보**를 생성한다.
- 첫 프레임에서의 카메라 위치를 월드의 (0, 0, 0)으로 설정한다.

즉, 월드 좌표계는 사용자의 첫 카메라 위치가 기준이며, 이후 움직임에 따라 트래킹 좌표계가 갱신되는 방식이다.

## **4. 앵커(anchor)의 역할**
ARKit에서는 **ARAnchor**가 공간상의 특정 위치를 나타내는 객체로 활용된다. 앵커는 월드 좌표계 기준으로 3D 위치를 갖는다. 오브젝트를 배치하려면 반드시 이 앵커의 좌표가 기준이 된다.

앵커는 다음 두 가지 방식으로 생성된다
- **자동 생성**: 예를 들어, ARPlaneAnchor는 평면을 탐지하면 ARKit이 자동으로 생성한다.
- **수동 생성**: 사용자가 특정 위치에 오브젝트를 놓고 싶을 때 직접 생성한다. 이때의 위치는 월드 좌표계를 기준으로 한다.
    

## **5. 재실행 시 월드 좌표계의 변화**
앱을 종료하거나 ARSession을 reset하면 좌표계는 초기화된다. 이 경우 기존에 있던 오브젝트 위치는 더 이상 유효하지 않을 수 있다.

이 문제를 해결하려면 다음 중 하나를 고려한다

- **ARWorldMap**: 이전 환경의 특징점과 앵커 정보를 저장하고 다시 불러올 수 있다. 이를 통해 좌표계를 복원한다.
- **GPS + 자이로 기반 보정**: 외부 좌표계를 도입해 월드 좌표계의 기준이 바뀌더라도 상대 위치를 보정할 수 있다.


## **6. 안정적인 오브젝트 배치를 위한 전략**

앵커 위치가 정확하게 유지되지 않으면 오브젝트가 흔들리거나, 잘못된 위치에 떠 있을 수 있다. 이를 방지하기 위해 다음과 같은 전략이 필요하다

- **충분한 공간 스캔**: 초기 스캔 시 넓은 영역을 인식하게 하여 앵커의 정확도 확보
- **평면 기준 앵커 활용**: ARPlaneAnchor를 기반으로 오브젝트를 올리면 안정성이 증가한다
- **세션 지속성 확보**: ARWorldMap을 저장하고 불러오면 기존 오브젝트의 좌표계를 재현할 수 있다
- **카메라 움직임 최소화 후 배치**: 월드 좌표계가 안정화되기 전에 오브젝트를 배치하면 흔들림이 생길 수 있다
  

## **7. AR 경험 설계에서의 시사점**

ARKit의 좌표계는 **시작 지점을 기준으로 삼고, 상대적인 위치와 방향을 유지하는 방식**이다. 절대적인 GPS 기반 위치가 아니라, 사용자의 초기 위치가 월드의 중심이 된다.

따라서 AR 경험을 설계할 때는 다음을 고려해야 한다
- “앵커가 진짜 공간에서 무엇을 의미하는가?” 를 고민할 것
- “앵커를 다시 찾을 수 있는 단서가 충분한가?” 를 확인할 것
- “앵커 없이 오브젝트가 떠다니지는 않는가?” 를 테스트할 것


## **결론**

ARKit의 월드 좌표계는 디바이스의 초기 위치를 기준으로 시작되며, 이후 환경 인식과 앵커 기반으로 공간이 확장된다. 이 좌표계에 대한 이해는 단순히 오브젝트를 띄우는 수준을 넘어, **AR 경험의 신뢰성과 일관성**을 확보하는 핵심이 된다.

좌표계는 눈에 보이지 않지만, 공간 안에서 벌어지는 모든 일의 기준이 된다.
그래서 이 보이지 않는 프레임을 얼마나 정확하게 이해하고 제어하는지가, 진짜 AR 앱의 품질을 결정하게 된다.


### **나의 Finding & Synthesis**

1. **ARKit의 월드 좌표계는 AR 세션 시작 시 디바이스 초기 위치와 방향을 기준으로 설정된다.**
2. **월드 좌표계는 우측 좌표계로 구성되며, 카메라 전방(Z–) 방향이 기준 축이 된다.**
3. **앵커는 이 월드 좌표계를 기준으로 오브젝트의 위치를 고정시키는 핵심 요소이다.**
4. **앵커의 정확도를 높이기 위해서는 충분한 공간 스캔과 평면 기반 앵커 활용이 중요하다.**
5. **ARWorldMap을 저장 및 복원하면 세션 간 월드 좌표계의 일관성을 유지할 수 있다.**
6. **GPS와 자이로를 병행하면 외부 기준 좌표계와의 동기화를 통해 보정이 가능하다.**
7. **월드 좌표계는 눈에 보이지 않지만, 모든 AR 오브젝트의 위치 판단의 기준점이 되므로 정확한 이해가 필수적이다.**

## Keywords
- [[ARKit]]


## GQ
- **AR에서 “고정된 공간”을 인식한다는 것은 어떤 기술적 과정이며, 이를 활용해 위치 일관성을 확보하려면 무엇이 필요할까?**
- 4. **앵커의 위치가 부정확해지는 원인은 무엇이며, 이를 보완하기 위해 어떤 보정 전략을 쓸 수 있을까?***
- **ARKit의 좌표계는 GPS, 자이로, SLAM 등 어떤 센서 데이터에 의존하며, 각각이 좌표 정확도에 미치는 영향은?**


#Onething 
