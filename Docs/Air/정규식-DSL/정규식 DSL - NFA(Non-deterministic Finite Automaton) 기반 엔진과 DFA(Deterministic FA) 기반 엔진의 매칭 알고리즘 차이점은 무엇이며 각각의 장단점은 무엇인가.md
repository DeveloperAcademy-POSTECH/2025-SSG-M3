>[!question]
>GQ. 1. NFA(Non-deterministic Finite Automaton) 기반 엔진과 DFA(Deterministic FA) 기반 엔진의 매칭 알고리즘 차이점은 무엇이며 각각의 장단점은 무엇인가

## NFA 기반 엔진과 DFA 기반 엔진의 매칭 알고리즘 차이

| 항목     | NFA 기반 엔진                         | DFA 기반 엔진                     |
| ------ | --------------------------------- | ----------------------------- |
| 상태 전이  | 여러 상태로 동시에 전이 가능 (비결정성)           | 하나의 상태에서 다음 상태로 단일 전이 (결정성)   |
| 매칭 방식  | 백트래킹 또는 스택을 사용한 시뮬레이션             | 상태 전이 테이블을 통한 선형 탐색           |
| 표현력    | 일부 구현은 backreference 같은 복잡한 문법 지원 | 정규 언어만 지원 (더 제한적)             |
| 구현 복잡도 | 상대적으로 간단하고 유연함                    | 상태 폭발(State Explosion) 가능성 있음 |
| 실행 시간  | 최악의 경우 지수 시간 (backtracking 기반)    | 입력 문자열 길이에 따라 선형 시간           |
- Swift의 NSRegularExpression은 NFA + 백트래킹 기반이고, 표현력이 강력하다. (lookahead, capture 등) 사용성이 매우 간편하지만 최악의 경우 성능이 느리다.
- Swift에서 DFA를 사용하려면 직접 구현해야 한다.

## 각각의 장단점
#### 1. NFA 기반 엔진
##### 장점
- 표현력이 뛰어남 (backreference, lookahead/lookbehind 등 확장 문법 지원)
- 간단한 구현: 재귀 또는 스택 기반 구현이 직관적
- 일부 입력에는 빠르게 동작 (특히 매칭 실패 시 빨리 종료됨)

##### 단점
- 백트래킹으로 인한 성능 저하: 특정 정규식과 입력에서 지수 시간 소요 가능 (catastrophic backtracking)
- ReDoS (Regular Expression Denial of Service) 취약 가능성 존재

#### 2. DFA 기반 엔진
##### 장점
- 일관된 성능: 입력 길이에 대해 항상 선형 시간 (O(n)) 동작
- ReDoS에 안전: 백트래킹이 없으므로 공격에 덜 취약
- 빠른 매칭 여부 판단 (특히 검색에서 유리)
##### 단점
- 상태 수가 폭발할 수 있음 (상태 수가 정규식 크기에 지수적으로 증가)
- 표현력 제한: 일부 고급 문법(lookbehind, backreference 등) 미지원

## 예시
#### 예제 정규식: a?(b|c)d
##### NFA 상태도
```
(Start) --'a'--> (A)
        \          \
         ε         'b'/'c'
          \              \
           -> (B) -'b'/'c'-> (C) --'d'--> (D: accept)
```
- ε-transition으로 곧바로 B로 가서 'b'나 'c'를 읽을 수도 있고,
- 'a'를 읽고 A를 거쳐 B로 가서 'b'를 읽을 수도 있음
- 두 경로를 동시에 생각함

##### DFA 상태표
| 상태  | 의미              | 입력 ‘a’ | 입력 ‘b’ | 입력 ‘c’ | 입력 ‘d’ | 그 외 |
| --- | --------------- | ------ | ------ | ------ | ------ | --- |
| S0  | 시작              | S1     | S2     | S3     | -      | -   |
| S1  | a 읽음            | -      | S4     | S5     | -      | -   |
| S2  | b 읽음 (no a)     | -      | -      | -      | S6     | -   |
| S3  | c 읽음 (no a)     | -      | -      | -      | S6     | -   |
| S4  | a 후 b           | -      | -      | -      | S6     | -   |
| S5  | a 후 c           | -      | -      | -      | S6     | -   |
| S6  | d까지 완료 (accept) | -      | -      | -      | -      | -   |
- DFA에서는 입력 하나하나에 따라 정확한 상태 구분을 명시해야 하므로 상태가 많아지고 복잡해짐
- 경로는 1가지만 존재함

## Keywords
- [[NFA]]
- [[DFA]]
- [[NSRegularExpression]]

## 작성자
- #Air 