>[!question]
>GQ1. 백트래킹(Backtracking) 방식 정규식 엔진의 동작 원리와 백트래킹으로 인해 발생할 수 있는 성능 문제(캣스트로피)의 원인은 무엇인가

## Description
- 백트래킹 기반 엔진은 문자열을 정규식에 맞춰가며 재귀적으로 가능한 모든 경우를 시도한다. 성공하는 경로를 찾거나, 없으면 끝까지 모든 경로를 탐색하다 실패함.

1. 정규식 패턴을 앞에서부터 차례대로 해석 
2. 각 부분에서 문자열과 매칭을 시도 
3. 성공하면 다음 단계로 진행, 실패하면 이전 분기점으로 돌아감 
4.  가능한 모든 분기(combination)를 시도

## 주요 기능

백트래킹 방식 정규식 엔진 
+ 정규식: `(a|aa)*b`   입력문자열: `"aaaab"`
1. 시도: `(a)(a)(a)(a)b` →  성공
2. 시도: `(a)(a)(aa)b` →  성공
3. 시도: `(aa)(a)(a)b` →  성공
4. 시도: `(aa)(aa)b` →  성공
5. 시도: `(a)(aa)(a)b` →  성공
6. 모든 가능한 분할을 시도함

→ 5가지 경우 모두 맞기 때문에 **매칭은 성공**, 하지만 내부적으로는 많은 **백트래킹 작업이 일어남**.

**캣스트로피(Catastrophic Backtracking)** : 정규식이 많은 경로를 백트래킹하게 되면서, 입력이 길어질수록 처리 시간이 기하급수적으로 증가하는 문제

## 코드 예시

+ 정규식: `^(a+)+$`  입력 문자열: `"aaaaaaaaaaaaaaaaab"`
백트래킹 방식 정규식 엔진
1. 먼저 `(a+)+`에서 **모든 17개의 `a`를 한 덩어리로 먹어봄** → `"aaaaaaaaaaaaaaaaa"` 
    - 남은 건 `"b"` → 실패  → 백트래킹 시작
2. 이제 하나 덜 먹어봄: `[aaaaaaaaaaaaaaaa] [a]`
    - 남은 `"b"` → 실패 
3. 다시 덜 먹어봄: `[aaaaaaaaaaaaaaa] [aa]`
    - 남은 `"b"` → 실패 
→ 이런 식으로 **가능한 모든 `a` 분할 방법**을 시도하고,  그때마다 마지막 문자가 `b`여서 항상 실패**함

입력 문자열 길이가 `n`일 때, 가능한 `a` 분할 조합은 **거의 2ⁿ 개** 가까이 생겨
- `"aaaa"` → 5가지 경우
- `"aaaaaaaa"` → 약 50개
- `"aaaaaaaaaaaaaaaa"` → 수천 개
- `"aaaaaaaaaaaaaaaaaaaaaaaa"` → 수백만~수천만 번 시도
- 실제로 브라우저나 서버가 멈출 정도로 심각한 성능 이슈

| 캣스트로피 원인  | 설명                            |
| --------- | ----------------------------- |
| 중첩된 반복    | `(a+)+` 같이 반복 안에 또 반복이 있는 경우  |
| 애매한 경계    | 입력 문자열이 거의 매칭되다가 마지막에서 틀리는 경우 |
| 모든 경로를 탐색 | 엔진이 가능한 모든 분할 조합을 시도하기 때문     |

| 해결 방법     | 설명                                |
| --------- | --------------------------------- |
| 반복 최소화    | `(a+)+` 대신 `a+` 또는 `(?:a+)+`      |
| 명확한 경계 추가 | `$`로 종료 조건 명확히 하거나 `\b` 등으로 경계 설정 |
| 정규식 재작성   | 가능하면 비백트래킹 엔진 사용                  |

백트랙킹이 유리할 때

| 문제 유형        | 예시                      | 이유                       |
| ------------ | ----------------------- | ------------------------ |
| **조합 생성**    | "n개 중 k개 고르기"           | 경우의 수 많지만 조건에 따라 가지치기 가능 |
| **순열 생성**    | "1,2,3으로 만들 수 있는 모든 순열" | 모든 순서를 탐색하면서 중복 방지 가능    |
| **그래프 탐색**   | 미로 찾기, 퍼즐, 나이트 투어       | DFS처럼 경로 따라가다 막히면 돌아가기   |
| **문자열 분할**   | 괄호 맞추기, 단어 쪼개기          | 가능한 분할 경로 모두 탐색 가능       |
| **문제 풀이 시도** | N-Queens, 스도쿠           | 조건 안 맞으면 가지치기로 탐색 줄이기    |

## Keywords
+ 파생된 키워드들을 작성

## References
- 참고한 레퍼런스를 작성 (예 : Apple의 공식 문서)

## 작성자
- 작성한 사람의 닉네임 (예: # Air )